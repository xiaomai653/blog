---
title: SpringBoot整合SpringTask
date: 2022-03-08 10:34:01
permalink: /pages/d0754d/
categories:
  - 学习资料
  - Java实战
tags:
  - task
---

## cron 表达式

>cron表达式是一个字符串，字符串以5或6个空格隔开，分为6或7个域，每一个域代表一个含义，在SpringTask中可以用于指定任务的执行时间。

|   秒   |   分  |   时   |   日期   |   月   |  星期  |   年（可选）  |
|  :----: | :----:  |  :----:  | :----:  |  :----:  | :----:  | :----:  |
| Seconds | Minutes | Hours | DayofMonth | Month | DayofWeek | Year |

>每一个域可出现的字符

| 字段 |	 允许值 | 允许的特殊字符 |
|  :----  | ----  |  ----  |
|秒（Seconds）	|0~59的整数	|, - * / 四个字符|
|分（Minutes）	|0~59的整数	|, - * / 四个字符|
|小时（Hours）	|0~23的整数	|, - * / 四个字符|
|日期（DayofMonth）	|1~31的整数（但是你需要考虑你月的天数）	|,- * ? / L W C 八个字符|
|月份（Month）	|1~12的整数或者 JAN-DEC	|, - * / 四个字符|
|星期（DayofWeek）	|1~7的整数或者 SUN-SAT （1=SUN）	|, - * ? / L C # 八个字符|
|年(可选，留空)（Year）	|1970~2099	|, - * / 四个字符|

>cron格式中特殊字符说明

|字符	|作用	|举例|
|  ----  | ----  |  ----  |
|,	|列出枚举值	|在Minutes域使用5,10，表示在5分和10分各触发一次|
|-	|表示触发范围	|在Minutes域使用5-10，表示从5分到10分钟每分钟触发一次|
|*	|匹配任意值	|在Minutes域使用*, 表示每分钟都会触发一次|
|/	|起始时间开始触发，每隔固定时间触发一次	|在Minutes域使用5/10,表示5分时触发一次，每10分钟再触发一次|
|?	|在DayofMonth和DayofWeek中，用于匹配任意值	|在DayofMonth域使用?,表示每天都触发一次|
|#	|在DayofMonth中，确定第几个星期几	|1#3表示第三个星期日|
|L	|表示最后	|在DayofWeek中使用5L,表示在最后一个星期四触发|
|W	|表示有效工作日(周一到周五)	|在DayofMonth使用5W，如果5日是星期六，则将在最近的工作日4日触发一次|

>cron示例

`0 0 2 1 * ? *` 表示在每月的1日的凌晨2点调度任务  
`0 15 10 ? * MON-FRI` 表示周一到周五每天上午10：15执行作业   
`0 15 10 ? 6L 2002-2006` 表示2002-2006年的每个月的最后一个星期五上午10:15执行作  
`0 0 10,14,16 * * ?` 每天上午10点，下午2点，4点   
`0 0/30 9-17 * * ?` 朝九晚五工作时间内每半小时   
`0 0 12 ? * WED` 表示每个星期三中午12点   
`0 0 12 * * ?` 每天中午12点触发   
`0 15 10 ? * *` 每天上午10:15触发   
`0 15 10 * * ?` 每天上午10:15触发   0 15 10 * * ? *” 每天上午10:15触发   
`0 15 10 * * ? 2005` 2005年的每天上午10:15触发   
`0 * 14 * * ?` 在每天下午2点到下午2:59期间的每1分钟触发   
`0 0/5 14 * * ?` 在每天下午2点到下午2:55期间的每5分钟触发   
`0 0/5 14,18 * * ?` 在每天下午2点到2:55期间和下午6点到6:55期间的每5分钟触发   
`0 0-5 14 * * ?` 在每天下午2点到下午2:05期间的每1分钟触发   
`0 10,44 14 ? 3 WED` 每年三月的星期三的下午2:10和2:44触发   
`0 15 10 ? * MON-FRI` 周一至周五的上午10:15触发   
`0 15 10 15 * ?` 每月15日上午10:15触发   
`0 15 10 L * ?` 每月最后一日的上午10:15触发   
`0 15 10 ? * 6L` 每月的最后一个星期五上午10:15触发   
`0 15 10 ? * 6L` 2002-2005 2002年至2005年的每月的最后一个星期五上午10:15触发   
`0 15 10 ? * 6#3` 每月的第三个星期五上午10:15触发  

## 配置

### 启动类
```java
@SpringBootApplication
@EnableScheduling //开启定时任务功能
public class SpringBootApplication {
    
    public static void main(String[] args) {
        SpringApplication.run(SpringBootApplication.class, args);
    }

}
```

### 使用
```java
@Component
public class HelloWorldTask {

    //每天凌晨两点输出hello world
    @Scheduled(cron = "0 0 2 * * ?")
    public void hello() {
       System.out.println("hello world");
    }

}
```